const I18N = {
  ru: {
    "header.sub":"Таджикистан · 2026",
    "nav.home":"Главная",
    "nav.about":"О форуме",
    "nav.program":"Программа",
    "nav.sponsors":"Спонсорам",
    "nav.contacts":"Контакты",
    "nav.register":"Регистрация",
    "nav.policy":"Политика конфиденциальности",
    "nav.rules":"Правила участия",

    "footer.sub":"Таджикистан · 2026",
    "footer.tag":"Инвестиционная платформа полноциклового текстиля и устойчивых цепочек поставок.",
    "footer.links":"Ссылки",
    "footer.contacts":"Контакты",
    "footer.phone":"Телефон: +992 837 221-88-29",
    "footer.location":"Душанбе, Таджикистан",
    "footer.copy":"© 2026 International Textile Forum, Tajikistan. Все права защищены.",
    "footer.become":"Стать спонсором",

    "register.title":"Универсальная регистрация",
    "register.subtitle":"Одна форма для всех типов участников. Дополнительные поля появляются автоматически.",
    "required.note":"* обязательное поле",

    "form.type":"Тип участника*",
    "type.delegate":"Делегат",
    "type.speaker":"Спикер / модератор",
    "type.investrep":"Представитель инвестиционного проекта / стартап",
    "type.investor":"Инвестор",
    "type.sponsor":"Спонсор / партнер",
    "type.media":"СМИ / пресса",

    "f.lastname":"Фамилия*",
    "f.firstname":"Имя*",
    "f.latname":"Фамилия и имя (латиницей)*",
    "f.position":"Должность / позиция*",
    "f.org":"Организация / компания (полное название)*",
    "f.country":"Страна*",
    "f.city":"Город*",
    "f.email":"Рабочий email*",
    "f.phone":"Мобильный телефон (с кодом страны)*",

    "f.format":"Формат участия*",
    "format.onsite":"Очно",
    "format.online":"Онлайн",

    "f.sessions":"Интересующие сессии / секции форума*",
    "sess.open":"Открытие / Пленарное заседание",
    "sess.s1":"Сессия №1 — Зеленая цепочка",
    "sess.s2":"Сессия №2 — Digital spinning / Industry 4.0",
    "sess.s3":"Сессия №3 — Зеленое финансирование",
    "sess.s4":"Сессия №4 — Кадры будущего",
    "sess.final":"Заключительная — Made in Tajikistan",
    "sess.b2b":"B2B / переговоры",

    "f.inviteNeed":"Нужен официальный пригласительный/подтверждение участия?*",
    "yes":"Да",
    "no":"Нет",
    "f.inviteComment":"Комментарий к приглашению (виза/командировка)",

    "f.workLang":"Рабочий язык общения*",
    "lang.ru":"RU",
    "lang.en":"EN",
    "lang.tj":"TJ",

    "f.interests":"Тематика интересов (опц.)",
    "f.b2bNeed":"Нужны ли B2B‑встречи и с кем (опц.)",
    "f.special":"Особые запросы (виза/питание/доступная среда/комментарии)",
    "f.source":"Как вы узнали о форуме? (опц.)",

    "legal.pd":"Согласие на обработку персональных данных*",
    "legal.rules":"Согласие с правилами участия / офертой форума*",

    "anti.title":"Антиспам",
    "anti.tip":"Решите простую задачу и отправьте форму. Это защищает от автоматических заявок.",
    "anti.answer":"Ответ*",

    "submit":"Отправить заявку",

    "speaker.block":"Дополнительные поля: Спикер / модератор",
    "speaker.bio":"Краткая биография (до 1000 символов)",
    "speaker.photo":"Фото (jpg/png/webp, до 5MB)",
    "speaker.role":"Статус*",
    "speaker.role.speaker":"Спикер",
    "speaker.role.moderator":"Модератор",
    "speaker.topic":"Предлагаемая тема выступления*",
    "speaker.abstract":"Краткое описание / аннотация (500–1000 символов)",
    "speaker.track":"Предпочтительная секция / трек форума",
    "speaker.format":"Формат*",
    "speaker.format.talk":"Доклад",
    "speaker.format.panel":"Панельная дискуссия",
    "speaker.format.keynote":"Keynote",
    "speaker.talkLang":"Язык выступления*",
    "speaker.interpret":"Нужен ли синхронный перевод?",
    "speaker.tech":"Требования к технике",
    "speaker.site":"Ссылка на сайт (URL)",
    "speaker.materials":"Ссылка/файл презентации (до 10MB)",
    "speaker.consent":"Согласие на публикацию имени/должности/фото/описания*",

    "investrep.block":"Дополнительные поля: Проект / стартап",
    "investrep.name":"Название проекта / компании*",
    "investrep.desc":"Краткое описание проекта (до 1000 символов)",
    "investrep.segment":"Отрасль / сегмент*",
    "investrep.stage":"Стадия проекта*",
    "stage.idea":"Идея",
    "stage.pilot":"Пилот",
    "stage.active":"Действующее производство",
    "stage.scale":"Масштабирование",
    "investrep.need":"Объем требуемых инвестиций (диапазон)*",
    "investrep.pref":"Предпочтительный формат участия инвестора",
    "investrep.site":"Ссылка на сайт/лендинг (URL)",
    "investrep.file":"Презентация / бизнес‑план (до 10MB)",

    "investor.block":"Дополнительные поля: Инвестор",
    "investor.type":"Тип инвестора*",
    "inv.fund":"Фонд",
    "inv.bank":"Банк",
    "inv.private":"Частный инвестор",
    "inv.corp":"Корпорация",
    "investor.focus":"Инвестиционный фокус",
    "investor.projects":"Тип интересующих проектов",
    "investor.range":"Диапазон возможных инвестиций*",

    "sponsor.block":"Дополнительные поля: Спонсор / партнер",
    "sponsor.legal":"Полное юридическое название компании*",
    "sponsor.web":"Веб‑сайт (URL)",
    "sponsor.profile":"Сфера деятельности / профиль*",
    "sponsor.level":"Уровень спонсорства*",
    "sponsor.level.silver":"Silver",
    "sponsor.level.gold":"Gold",
    "sponsor.level.platinum":"Platinum",
    "sponsor.custom":"Рассмотреть индивидуальный пакет",
    "sponsor.goals":"Цели участия",
    "sponsor.activations":"Нужны ли дополнительные активации",
    "sponsor.contactName":"Контактное лицо по спонсорству (если отличается)",
    "sponsor.contactEmail":"Email контактного лица",
    "sponsor.contactPhone":"Телефон контактного лица"
  },

  en: {
    "header.sub":"Tajikistan · 2026",
    "nav.home":"Home",
    "nav.about":"About",
    "nav.program":"Program",
    "nav.sponsors":"Sponsorship",
    "nav.contacts":"Contacts",
    "nav.register":"Register",
    "nav.policy":"Privacy policy",
    "nav.rules":"Participation rules",

    "footer.sub":"Tajikistan · 2026",
    "footer.tag":"An investment platform for full‑cycle textiles and sustainable supply chains.",
    "footer.links":"Links",
    "footer.contacts":"Contacts",
    "footer.phone":"Phone: +992 837 221-88-29",
    "footer.location":"Dushanbe, Tajikistan",
    "footer.copy":"© 2026 International Textile Forum, Tajikistan. All rights reserved.",
    "footer.become":"Become a sponsor",

    "register.title":"Universal registration",
    "register.subtitle":"One form for all participant types. Extra fields appear automatically.",
    "required.note":"* required",

    "form.type":"Participant type*",
    "type.delegate":"Delegate",
    "type.speaker":"Speaker / Moderator",
    "type.investrep":"Project / Startup representative",
    "type.investor":"Investor",
    "type.sponsor":"Sponsor / Partner",
    "type.media":"Media / Press",

    "f.lastname":"Last name*",
    "f.firstname":"First name*",
    "f.latname":"Name in Latin (badge/certificate)*",
    "f.position":"Position / Title*",
    "f.org":"Organization / Company (full name)*",
    "f.country":"Country*",
    "f.city":"City*",
    "f.email":"Work email*",
    "f.phone":"Mobile phone (with country code)*",

    "f.format":"Participation format*",
    "format.onsite":"On‑site",
    "format.online":"Online",

    "f.sessions":"Interested sessions / tracks*",
    "sess.open":"Opening / Plenary",
    "sess.s1":"Session #1 — Green supply chain",
    "sess.s2":"Session #2 — Digital spinning / Industry 4.0",
    "sess.s3":"Session #3 — Green finance",
    "sess.s4":"Session #4 — Future workforce",
    "sess.final":"Final — Made in Tajikistan",
    "sess.b2b":"B2B / meetings",

    "f.inviteNeed":"Need an official invitation/confirmation?*",
    "yes":"Yes",
    "no":"No",
    "f.inviteComment":"Invitation comment (visa/business trip)",

    "f.workLang":"Working language*",
    "lang.ru":"RU",
    "lang.en":"EN",
    "lang.tj":"TJ",

    "f.interests":"Areas of interest (optional)",
    "f.b2bNeed":"Need B2B meetings and with whom (optional)",
    "f.special":"Special requests (visa, meals, accessibility, notes)",
    "f.source":"How did you learn about the Forum? (optional)",

    "legal.pd":"Consent to personal data processing*",
    "legal.rules":"Consent to participation rules / offer*",

    "anti.title":"Anti‑spam",
    "anti.tip":"Solve a simple task and submit. This protects from automated requests.",
    "anti.answer":"Answer*",

    "submit":"Submit",

    "speaker.block":"Extra fields: Speaker / Moderator",
    "speaker.bio":"Short bio (up to 1000 chars)",
    "speaker.photo":"Photo (jpg/png/webp, up to 5MB)",
    "speaker.role":"Status*",
    "speaker.role.speaker":"Speaker",
    "speaker.role.moderator":"Moderator",
    "speaker.topic":"Proposed talk topic*",
    "speaker.abstract":"Abstract (500–1000 chars)",
    "speaker.track":"Preferred track/session",
    "speaker.format":"Format*",
    "speaker.format.talk":"Talk",
    "speaker.format.panel":"Panel discussion",
    "speaker.format.keynote":"Keynote",
    "speaker.talkLang":"Talk language*",
    "speaker.interpret":"Need simultaneous interpretation?",
    "speaker.tech":"Technical requirements",
    "speaker.site":"Website link (URL)",
    "speaker.materials":"Presentation/materials (up to 10MB)",
    "speaker.consent":"Consent to publish name/title/photo/description*",

    "investrep.block":"Extra fields: Project / Startup",
    "investrep.name":"Project / company name*",
    "investrep.desc":"Project description (up to 1000 chars)",
    "investrep.segment":"Industry / segment*",
    "investrep.stage":"Project stage*",
    "stage.idea":"Idea",
    "stage.pilot":"Pilot",
    "stage.active":"Operating production",
    "stage.scale":"Scaling",
    "investrep.need":"Required investment range*",
    "investrep.pref":"Preferred investor format",
    "investrep.site":"Landing/website URL",
    "investrep.file":"Pitch deck / business plan (up to 10MB)",

    "investor.block":"Extra fields: Investor",
    "investor.type":"Investor type*",
    "inv.fund":"Fund",
    "inv.bank":"Bank",
    "inv.private":"Private investor",
    "inv.corp":"Corporation",
    "investor.focus":"Investment focus",
    "investor.projects":"Preferred project types",
    "investor.range":"Investment range*",

    "sponsor.block":"Extra fields: Sponsor / Partner",
    "sponsor.legal":"Legal company name*",
    "sponsor.web":"Website (URL)",
    "sponsor.profile":"Business profile*",
    "sponsor.level":"Sponsorship level*",
    "sponsor.level.silver":"Silver",
    "sponsor.level.gold":"Gold",
    "sponsor.level.platinum":"Platinum",
    "sponsor.custom":"Consider a custom package",
    "sponsor.goals":"Goals",
    "sponsor.activations":"Additional activations",
    "sponsor.contactName":"Sponsorship contact person (if different)",
    "sponsor.contactEmail":"Contact email",
    "sponsor.contactPhone":"Contact phone"
  },

  tj: {
    "header.sub":"Тоҷикистон · 2026",
    "nav.home":"Асосӣ",
    "nav.about":"Дар бораи форум",
    "nav.program":"Барнома",
    "nav.sponsors":"Сарпарастон",
    "nav.contacts":"Тамос",
    "nav.register":"Бақайдгирӣ",
    "nav.policy":"Сиёсати махфият",
    "nav.rules":"Қоидаҳои иштирок",

    "footer.sub":"Тоҷикистон · 2026",
    "footer.tag":"Платформаи сармоягузорӣ барои нассоҷии пуррадавра ва занҷирҳои устувори таъминот.",
    "footer.links":"Пайвандҳо",
    "footer.contacts":"Тамос",
    "footer.phone":"Телефон: +992 837 221-88-29",
    "footer.location":"Душанбе, Тоҷикистон",
    "footer.copy":"© 2026 International Textile Forum, Tajikistan. Ҳамаи ҳуқуқҳо ҳифз шудаанд.",
    "footer.become":"Сарпараст шудан",

    "register.title":"Бақайдгирии универсалӣ",
    "register.subtitle":"Як форма барои ҳамаи намудҳои иштирок. Майдонҳои иловагӣ худкор пайдо мешаванд.",
    "required.note":"* ҳатмӣ",

    "form.type":"Навъи иштирокчӣ*",
    "type.delegate":"Делегат",
    "type.speaker":"Спикер / модератор",
    "type.investrep":"Намояндаи лоиҳа / стартап",
    "type.investor":"Инвестор",
    "type.sponsor":"Сарпараст / шарик",
    "type.media":"Медиа / матбуот",

    "f.lastname":"Насаб*",
    "f.firstname":"Ном*",
    "f.latname":"Ном (лотинӣ)*",
    "f.position":"Вазифа*",
    "f.org":"Ташкилот / ширкат (пурра)*",
    "f.country":"Кишвар*",
    "f.city":"Шаҳр*",
    "f.email":"Email (корӣ)*",
    "f.phone":"Телефон (бо коди кишвар)*",

    "f.format":"Формати иштирок*",
    "format.onsite":"Ҳузурӣ",
    "format.online":"Онлайн",

    "f.sessions":"Сессияҳо / сексияҳо*",
    "sess.open":"Кушодашавӣ / Пленарӣ",
    "sess.s1":"Сессия №1 — Занҷири сабз",
    "sess.s2":"Сессия №2 — Industry 4.0",
    "sess.s3":"Сессия №3 — Молияи сабз",
    "sess.s4":"Сессия №4 — Кадрҳо",
    "sess.final":"Хулоса — Made in Tajikistan",
    "sess.b2b":"B2B / вохӯриҳо",

    "f.inviteNeed":"Оё даъватнома лозим аст?*",
    "yes":"Ҳа",
    "no":"Не",
    "f.inviteComment":"Шарҳ барои даъватнома (виза/сафар)",

    "f.workLang":"Забони корӣ*",
    "lang.ru":"RU",
    "lang.en":"EN",
    "lang.tj":"TJ",

    "f.interests":"Самтҳои шавқ (ихтиёрӣ)",
    "f.b2bNeed":"B2B вохӯриҳо ва бо кӣ (ихтиёрӣ)",
    "f.special":"Дархостҳои махсус",
    "f.source":"Аз куҷо фаҳмидед? (ихтиёрӣ)",

    "legal.pd":"Розигӣ ба коркарди маълумоти шахсӣ*",
    "legal.rules":"Розигӣ ба қоидаҳои иштирок*",

    "anti.title":"Антиспам",
    "anti.tip":"Мисоли оддиро ҳал кунед ва фиристед.",
    "anti.answer":"Ҷавоб*",

    "submit":"Фиристодан",

    "speaker.block":"Майдонҳои иловагӣ: Спикер / модератор",
    "investrep.block":"Майдонҳои иловагӣ: Лоиҳа / стартап",
    "investor.block":"Майдонҳои иловагӣ: Инвестор",
    "sponsor.block":"Майдонҳои иловагӣ: Сарпараст / шарик"
  }
};

function getLang(){
  const q = new URL(location.href).searchParams.get("lang");
  const saved = localStorage.getItem("lang");
  if(q && I18N[q]) return q;
  if(saved && I18N[saved]) return saved;
  return "ru";
}

function t(lang, key){
  return (I18N[lang] && I18N[lang][key]) ? I18N[lang][key] : key;
}

function applyI18n(lang){
  document.documentElement.lang = (lang === "tj") ? "tg" : lang;

  // Text nodes
  document.querySelectorAll("[data-i18n]").forEach(el=>{
    el.textContent = t(lang, el.getAttribute("data-i18n"));
  });

  // Placeholders (optional feature)
  document.querySelectorAll("[data-i18n-placeholder]").forEach(el=>{
    el.setAttribute("placeholder", t(lang, el.getAttribute("data-i18n-placeholder")));
  });

  // Language-specific blocks (policy/rules)
  document.querySelectorAll("[data-lang-block]").forEach(el=>{
    el.classList.toggle("hidden", el.getAttribute("data-lang-block") !== lang);
  });

  // Active state for buttons
  document.querySelectorAll("button[data-lang], .lang-btn").forEach(b=>{
    const blang = b.dataset.lang || b.getAttribute("data-lang");
    b.classList.toggle("active", blang === lang);
  });
}

function setLang(lang){
  localStorage.setItem("lang", lang);
  applyI18n(lang);
}

document.addEventListener("click", (e)=>{
  const b = e.target.closest("button[data-lang], .lang-btn");
  if(!b) return;
  const lang = b.dataset.lang || b.getAttribute("data-lang");
  if(lang && I18N[lang]) setLang(lang);
});
